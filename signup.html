<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Register</title>
  <link rel="stylesheet" href="sign_up.css" />
</head>

<body>
  <div id="outer">
    <!-- Normal cross (×) with location -->
    <p id="cross" onclick="window.location.href='index.html'">&times;</p>

    <h2>Register</h2>

    <form id="registerForm" method="post" novalidate>
      <input type="text" id="fn" name="Fn" placeholder="First Name" required />
      <div id="name_criteria"></div>

      <input type="text" id="ln" name="ln" placeholder="Last Name" required />

      <input type="email" id="email" name="email" placeholder="Email" required />
      <div id="email_criteria"></div>

      <input type="password" id="pwd" name="pwd" placeholder="Password" required />
      <div id="pwdcriteria"></div>

      <input type="password" id="cpwd" name="cpwd" placeholder="Confirm Password" required />

      <div class="text-captcha">
        <span id="captcha"></span>
        <button type="button" class="refresh-btn" id="refreshBtn">↻ Refresh</button>
      </div>

      <input type="text" id="userInput" placeholder="Enter captcha here" autocomplete="off" />

      <div class="captcha-box" onclick="toggleCheck(event)">
        <div id="customCheck" class="checkbox" role="checkbox" aria-checked="false"></div>
        <div>I’m not a robot</div>
      </div>

      <p id="result"></p>

      <input type="submit" value="Register" />
      <p class="signin-link">
        Already have an account? <a href="login.html">Login</a>
      </p>
    </form>
  </div>

  <script>
    // Name check
    function user() {
      var first = document.getElementById('fn').value.trim();
      var nc = document.getElementById('name_criteria');

      if (!/[A-Z]/.test(first) || !/[a-z]/.test(first)) {
        nc.style.display = 'block';
        nc.textContent = 'Name must have uppercase and lowercase letters.';
        return false;
      }

      nc.style.display = 'none';
      return true;
    }

    // Password check
    function pwd_check() {
      var pwd = document.getElementById('pwd').value.trim();
      var cpwd = document.getElementById('cpwd').value.trim();
      var feedback = document.getElementById('pwdcriteria');

      feedback.style.display = 'block';

      if (pwd.length < 10) {
        feedback.textContent = 'Password must be at least 10 characters.';
        return false;
      }

      if (!/[A-Z]/.test(pwd) || !/\d/.test(pwd)) {
        feedback.textContent = 'Password must include an uppercase and a number.';
        return false;
      }

      if (pwd !== cpwd) {
        feedback.textContent = 'Passwords do not match.';
        return false;
      }

      feedback.textContent = 'Password is strong ✔';
      feedback.style.color = 'green';
      return true;
    }

    // Email check
    function emailValidate() {
      var email = document.getElementById('email').value.trim();
      var out = document.getElementById('email_criteria');
      var regex = /^[a-zA-Z0-9._%+-]+@(gmail\.com|yahoo\.com)$/;

      if (!regex.test(email)) {
        out.style.display = 'block';
        out.textContent = 'Email must end with @gmail.com or @yahoo.com';
        return false;
      }

      out.style.display = 'none';
      return true;
    }

    // Fake checkbox
    var isChecked = false;
    function toggleCheck() {
      var box = document.getElementById('customCheck');
      isChecked = !isChecked;
      box.classList.toggle('checked', isChecked);
      box.textContent = isChecked ? '✔' : '';
    }

    // Captcha
    var captchaText = '';
    function generateCaptcha() {
      var chars = 'ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789';
      captchaText = Array.from({ length: 6 }, () => chars[Math.floor(Math.random() * chars.length)]).join('');
      document.getElementById('captcha').textContent = captchaText.split('').join(' ');
    }

    function verifyAll() {
      var result = document.getElementById('result');
      var userVal = document.getElementById('userInput').value.trim().replace(/\s+/g, '');

      if (!isChecked) {
        result.style.color = 'crimson';
        result.textContent = '⚠️ Confirm you are not a robot!';
        return false;
      }

      if (userVal.toLowerCase() === captchaText.toLowerCase()) {
        result.style.color = 'green';
        result.textContent = '✅ Captcha verified!';
        return true;
      }

      result.style.color = 'red';
      result.textContent = '❌ Wrong captcha. Try again!';
      generateCaptcha();
      return false;
    }

    // Form submit
    document.getElementById('registerForm').addEventListener('submit', function (e) {
      e.preventDefault();

      if (user() && pwd_check() && emailValidate() && verifyAll()) {
        alert('Registration successful!');
        window.location.href = 'login.html';
      }
    });

    // Init
    window.addEventListener('DOMContentLoaded', generateCaptcha);
    document.getElementById('refreshBtn').addEventListener('click', generateCaptcha);
  </script>

</body>


</html>

