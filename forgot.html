<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Forgot Password</title>
  <link rel="stylesheet" href="forgot.css" />
</head>

<body>
  <div class="container">
    <!-- Left Illustration -->
    <div class="illustration">
      <img src="images\forgot.png" alt="Forgot Password Illustration">
    </div>

    <!-- Right Form -->
    <div class="form-section">
         <!-- Cross icon -->
    <a href="index.html" class="close-btn">&times;</a>
    
      <h1>Forgot Password</h1>
      <form id="settingsForm" onsubmit="return pwd_check()">
        <label for="email">Enter the email address you used to register</label>
        <input type="email" id="email" placeholder="Please enter your email id" required />
        <div id="emailexist"></div>

        <input type="password" name="pwd" id="pwd" placeholder="New Password" required />
        <div id="pwdcriteria"></div>

        <input type="password" name="cpwd" id="cpwd" placeholder="Confirm Password" required />

        <button type="submit">Change Password</button>

        <div class="links">
          <a href="#">Terms & Conditions</a> â€¢ <a href="#">Privacy Policy</a>
        </div>
      </form>
    </div>
  </div>

  <script>
    window.addEventListener("DOMContentLoaded", () => {
      document.getElementById("email").value = localStorage.getItem("email") || "";
    });

    function pwd_check() {
      const savedEmail = localStorage.getItem("email");
      const enteredEmail = document.getElementById("email").value;
      const emailexist = document.getElementById("emailexist");
      const pwd = document.getElementById("pwd").value;
      const cpwd = document.getElementById("cpwd").value;
      const feedback = document.getElementById("pwdcriteria");

      feedback.style.display = "block";
      emailexist.textContent = "";
      feedback.textContent = "";

      if (savedEmail !== enteredEmail) {
        emailexist.textContent = "No account with this email.";
        return false;
      }

      if (pwd.length < 10) {
        feedback.textContent = "Password must be at least 10 characters long.";
        feedback.style.color = "#d9534f";
        return false;
      }

      if (!/[A-Z]/.test(pwd) || !/\d/.test(pwd)) {
        feedback.textContent = "Password must include an uppercase letter and a number.";
        feedback.style.color = "#d9534f";
        return false;
      }

      if (pwd !== cpwd) {
        feedback.textContent = "Passwords do not match.";
        feedback.style.color = "#d9534f";
        return false;
      }

      feedback.textContent = "Password is strong and matches.";
      feedback.style.color = "green";

      localStorage.setItem("password", pwd);

      setTimeout(() => {
        window.location.href = "home.html";
      }, 1000);

      return false;
    }
  </script>
</body>
</html>
